#daily

## 今日取り組んだタスク

- [ ] Rails応用１
- [ ] スッキリわかるSQL入門7章

---
---
## 一言

まだ病み上がりなので、学習時間は少なめなので、あまり進んでおりません💦
応用で触れる内容で、見覚えあるものは
その度に基礎と入門に戻って学習を進めております！
うん！卒業まで間に合うか、、、

---
---
## 学習内容

### SQL

###### 集計テーブルを更新する

説明：
集計テーブルのデメリットとして
集計テーブルに格納されている内容は、日にちが経つにつれて、どんどん古くなってしまう、、、
通常は、データの性質に応じて
毎日、毎月、毎年などの一定のタイミングで集計処理を再実行し
集計テーブルの内容を最新の状態に更新する処理が行われる！


##### SELECTをネストする

説明：
SELECT文で何らかしらの検索結果を得て、得られた具体的な値を用いて
さらにSELECTやUPDATEなどを実行した場合
ネストすれば、1つのSQL文を実現することができます！

具体例：最も大きな出費の費目と金額を求める

家計簿テーブル：
![[スクリーンショット 2025-11-13 23.10.36.png]]

SQL:
```sql
SELECT 費目, 出金額 FROM 家計簿
 WHERE 出金額 = (SELECT MAX(出金額) FROM 家計簿)・・・①
```

出力：
```sql
|費目|出金額|
|水道光熱費|7560|
```

補足１
①のSELECT文ように、他のSQL文の一部分として登場するSELECT文のことを
副問い合わせ、副照会、サブクエリなどと呼ばれています！

補足２
副問い合わせとは、他のSQL文の一部分として登場するSELECT文。丸括弧で括って記述する

##### 副問い合わせが処理される仕組み

1. まず内側にあるSELECT文が実行される
	1. WHERE 出金額 = (SELECT MAX(出金額) FROM 家計簿)
	   
2. 実行された結果に化ける！
	1. WHERE = 出金額 = 7560 ←最大値
	   
3. 化けた結果を使って、外側のSQL文が実行される
	1. SELECT 費目, 出金額 FROM 家計簿
	   WHERE = 出金額 = 7560

##### 副問い合わせのパターン

- 単一の値の代わりとして、副問い合わせの検索結果を用いる。
- 複数の値の代わりとして、副問い合わせの検索結果を用いる。
- 表の値の代わりとして、副問い合わせの検索結果を用いる。


---
---
## 学んだこと

- 集計テーブルを更新について
- SELECTのネストについて
- 副問い合わせが処理される仕組みについて


---
---
## 教材

- 


---
---
##### ⏳ 学習時間: 3.7時間  
##### 🌱 コミット数: １コミット