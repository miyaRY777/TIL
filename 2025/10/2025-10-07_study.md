#daily

## 今日取り組んだタスク

- [ ] 基礎ステップ総復習完了
- [ ] Railsガイド
- [ ] Ruby on Rails　速習実践ガイド 音読

---
---
## 一言

やっと基礎ステップの総復習の復習が終わりました！
やっと中間試験ですねw
ミニアプリ開発やpaiza、環境構築の学習など、やりたいことがたくさんありますが
今月もカリキュラムを進めることに力を入れたいです！

---
---
## 学習内容
### Ruby / Rails

### [[ネストされたハッシュ構造]]

大前提として、フォームから送られてきたデータは
Rails側で、params（パラメータ）というハッシュに格納される

例えば
```ruby
input type="text" name="email" value="abc@example.com"
```
があったとすると、送られてくるデータは以下のようになる
```ruby
params = { "email" => "abc@example.com" }

# 以下のようにすることで、呼び出せる
params[:email] # => "abc@example.com"

```


次にネスト構造を考えた場合
```ruby
<input type="text" name="user[email]" value="abc@example.com">
<input type="text" name="user[name]" value="alice">
```
user[email]やuser[name]などは、Railsはこれを **「ネストされたハッシュ構造」** として解釈される

送られてくるデータは以下のようになる
```ruby
params = {
  "user" => {
    "email" => "abc@example.com",
    "name"  => "alice"
  }
}

# 以下のようにしてuserを取り出す
params[:user]
# => {"email"=>"abc@example.com", "name"=>"alice"}


# さらに、emailを取り出すためには
params[:user][:email]
# => "abc@example.com"


```


### [[nilガード]]

説明：
左辺がfalseやnilの場合、右辺の値を代入
左辺に何かしらの値が入っている場合、代入は行われない

そんな挙動をする文法のこと

具体例：
```ruby
# 変数がnilの場合
user_name = nil
user_name ||= "ゲスト"
puts user_name # => ゲスト

# 変数がfalseの場合
is_active = false
is_active ||= true
puts is_active # => true

# 変数に値が代入済みの場合
email = "test@example.com"
email ||= "default@example.com"
puts email # => test@example.com
```

必要性：
- コードが簡潔になる：ifを使わずに、デフォルトの値を設定することができる
- 可読性が高まる：「もしnilだったらこの値を設定する」という意図が、一行のコードで明確に伝わる
- パフォーマンス：既に値が入っている場合は代入の処理が行われないため、無駄な処理を防ぐ
```ruby
# 変数がnilの場合
user_name = nil
if user_name.nil? || user_name == false
    user_name = "ゲスト"
end

puts user_name　#=> ゲスト

# nilガードを使うと
user_name = nil
user_name ||= "ゲスト"

puts user_name #=> ゲスト
```

```ruby
# 変数に値がある場合
email = "test.example.com"
if email.nil? || email == false
    email = "default.example.com"
end

puts email #=> test@example.com

# nilガードを使うと
email = "test.example.com"
email ||= "dafault.example.com"

puts email #=> test@example.com
```

nilガードはどのような問題を解決するのか？

例外（エラー）の発生を防ぐ
   
   説明：
   Railsにおいて、`nil`は`NilClass`クラスの唯一のインスタンスである
   しかし、nilは`nil`はごく一部のメソッド（`to_s`, `to_i`, `nil?`など）しか持たず、
   多くのメソッド（lengthやjoinなど）を定義していない
   
   だから、nilが入っている変数を呼び出そうとすると、`NoMethodError`という例外が発生してプログラムが停止してしまう
   
```ruby
user_name = nil
puts user_name.length # => NoMethodError が発生
```

解決:
`||=`を使ったnilガードで、`user_name`が`nil`の場合に備えてデフォルト値を設定しておくことで
例外の発生を未然に防ぎ、プログラムの安全性を高める

```ruby
user_name = nil
user_name ||= "ゲスト" # user_name が nil なので "ゲスト" が代入される
puts user_name.length # => 3
```


冗長なコードを簡潔にする

説明：`||=`を使うことで、コードの行数を減らし、見た目をすっきりとさせることができる


---


### [[TCP]]

説明：
Transmisson Control Protocolの略で
インターネット上でデータ通信を安全かつ確実に行うためのプロトコルのこと

データを送受信するときに、データを正確に順序通りにやり取りすることを保証してくれる

**TCPの主な役割**
- コネクションの確立
	- まずTCPがクライアントとサーバーでお互いに通信できるかどうか確認後
	  「コネクション」と呼ばれる通信経路を確立させて、データのやり取りをする
	- コネクションの確立には、３回やり取りをし、これを「３ウェイハンドシェイク」と呼ぶ
	- 切断するときは４回のやり取りを必要とする
- 他にもあるが、今はスルー

**クライアントからの要求（SYN）**
クライアントからサーバーに対して、接続を要求するためのSYNパケットと呼ばれるデータを送る
SYNパケットを受け取ったサーバーはそれに対して、応答する

**クライアントに対して確認応答および、サーバーからの接続要求（SYN + ACK）**
TCPはデータの信頼性を確保するためデータを送信した後は、必ず送信相手からの確認応答を受け取り
データの送信が完了したと判断する！この応答がACKパケット！
つまり
サーバーは
クライアントからの接続要求に対して、ACKパケットを送信することで接続可能を伝えている！
また、クライアントに対して、接続要求するためのSYNパケットを送信している
**サーバーに対して確認応答（ACK）**
サーバーから接続要求に対して、クライアントはACKパケットを送信する
結果
お互いにSYNパケットを送り、ACKパケットで応答することで双方向で通信が可能なことを確認することで
コネクションの確立完了





---
---
## 学んだこと

- ネストされたハッシュ構造の表現の仕方
- TCPについて
- nilガードについて


---
---
## 教材

- web技術の基本
- Railsガイド
-  RUNTEQカリキュラム：基礎STEP 総復習



---
---
##### ⏳ 学習時間: 4.6時間  
##### 🌱 コミット数: １コミット