#daily

## 今日取り組んだタスク

- [ ] 

---
---
## 一言





---
---
## 学習内容
### Ruby / Rails
```ruby
# 書いたコード
```


### SQL

##### グループ後の集計後の絞り込み

説明１：
集計結果から0円の行を除外したい場合
```sql
SELECT 費目, SUM(出金額), AS 費目別の出金額合計
FROM 家計簿
WHERE SUM(出金額) > 0
GROUP BY 費目
```

っとすると、エラーが発生してしまいます！
理由として、グループの集計の流れは、
1. 検索
2. グループ化
3. 集計
の順で行うのですが、、、
「1. 検索」の段階では、ただ行を絞り込む段階なので
「3. 集計」で初めて計算される`SUM(出金額)`の部分が未確定により、エラーが発生してしまいます、、、

つまり
行を絞り込む段階では、まだ集計が終わっていないので
集計関数は、WHERE句に記述できない！

説明２：
集計結果から0円の行を除外したいっと言うのは
1. 集計結果を行った後の結果表に対して
2. 0円の行を除外するための絞り込みを行う！

ここで、便利なのが「HAVING句」っと言うのがあります！
使い方としては、
WHERE句に記述するようなものと似ていており、異なる部分は
絞り込みが実行されるタイミングです！
- WHERE句：検索の絞り込みのタイミング
- HAVING句：集計後の絞り込みのタイミング


基本形：
```sql
SELECT グループ化の基準列名, 集計関数
FROM テーブル名
(WHERE 元の表に対する絞り込み条件)
GROUP BY グループ化の基準列名
HAVING 集計結果に対する絞り込み条件
```

具体例：集計結果から0円の行を除外したい



---
---
## エラーと対応

- エラー内容：
    
- 対処方法：


---
---
## 学んだこと

- 


---
---
## 教材

- 


---
---
##### ⏳ 学習時間: 時間  
##### 🌱 コミット数: 