#daily

## 今日取り組んだタスク

- [ ] 

---
---
## 一言





---
---
## 学習内容
### Ruby / Rails
```ruby
# 書いたコード
```

### SQL

##### 単一行副問い合わせ

説明：
検索結果が1行1列の1つの値となる副問い合わせを指しています！
また、これを記述できるのは
SELECT文の選択列リストやFROM句、UPDATE文のSET句、1つの値との判定を行うWHERE句の条件式です！

##### ↪︎SET句で利用する

説明：
SET句で利用すれば、集計と更新をいっぺんにできちゃいます！

具体例：SET句で副問い合わせを利用する

家計簿テーブル
![[スクリーンショット 2025-11-14 23.16.37.png]]
![[スクリーンショット 2025-11-14 23.17.18.png]]

家計簿集計テーブル
![[スクリーンショット 2025-11-14 23.18.20.png]]

SQL：
```sql
UPDATE 家計簿集計
SET 平均 = (SELECT AVG(出金額)
　　　　　　　　FROM 家計簿
　　　　　　　 WHERE 出金額 > 0
　　　　　　　   AND 費目 = '食費')
WHERE 費目 = '食費'
```

出力：
![[スクリーンショット 2025-11-14 23.29.31.png]]


##### ↪︎選択列リストで利用する

説明：

具体例：選択リストで副問い合わせを利用する

家計簿テーブル
![[スクリーンショット 2025-11-14 23.16.37.png]]
![[スクリーンショット 2025-11-14 23.17.18.png]]


家計簿集計テーブル
![[スクリーンショット 2025-11-14 23.36.12.png]]

SQL：
```sql
SELECT 日付, メモ, 出金額,
       (SELECT 合計 FROM 家計簿集計
         WHERE 費目 = '食費') AS 過去の合計額 ←10380の値を取得
  FROM 家計簿アーカイブ
 WHERE 費目 = '食費'
```

出力：
```sql
|日付|メモ|出金額|過去の合計額|

|2023-12-24|レストランみやび|5000|10380|
|2024-01-13|新年会|5000|10380|
```


---
---
## エラーと対応

- エラー内容：
    
- 対処方法：


---
---
## 学んだこと

- 


---
---
## 教材

- 


---
---
##### ⏳ 学習時間: 時間  
##### 🌱 コミット数: 