### 処理のmodule化

RSpecで記載するコードもRubyなので、処理の共通化（module化）ができます。  
以下はログインの処理をmodule化した例です。

##### `spec/support/login_macros.rb`

```ruby
module LoginMacros
  def login(user)
    visit login_path
    fill_in 'メールアドレス', with: user.email
    fill_in 'パスワード', with: user.password
    click_on 'ログイン'
  end
end
```

### 利用ファイルでincludeする  

moduleに切り出した処理を以下のようにincludeして利用します。

```ruby
RSpec.describe 'hogehoge', type: :system do
  include LoginMacros

  it 'ログインした後に...' do
    user = User.create(email: 'runteq@example.com', password: 'password')
    login(user)
    # ログイン後のテストを書く
  end
end
```