# セットアップ方法

```ruby
$ bin/rails active_storage:install
$ bin/rails db:migrate
```

上を実行すると設定が行われ、Active Storageが利用する3つのテーブルを作成します。

- `active_storage_blobs`
- `active_storage_attachments`
- `active_storage_variant_records`

| **テーブル** | **目的** |
| --- | --- |
| `active_storage_blobs` | アップロードされたファイルに関するデータ（ファイル名、Content-Typeなど）を保存します。 |
| `active_storage_attachments` | [モデルをblobsに接続する](https://railsguides.jp/active_storage_overview.html#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E3%83%AC%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AB%E6%B7%BB%E4%BB%98%E3%81%99%E3%82%8B)ポリモーフィックjoinテーブルです。
モデルのクラス名が変更された場合は、このテーブルでマイグレーションを実行して、背後の`record_type`をモデルの新しいクラス名に更新する必要があります。 |
| `active_storage_variant_records` | [バリアントトラッキング](https://railsguides.jp/active_storage_overview.html#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E3%83%AC%E3%82%B3%E3%83%BC%E3%83%89%E3%81%AB%E6%B7%BB%E4%BB%98%E3%81%99%E3%82%8B)が有効な場合は、生成された各バリアントに関するレコードを保存します。 |