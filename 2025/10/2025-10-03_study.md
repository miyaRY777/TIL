#daily

## 今日取り組んだタスク

- [ ]  基礎STEP 総復習 クイズ
- [ ] SQL chapter2の復習
- [ ] Web技術の基本　chapter3の復習


---


## 学習内容
### Ruby / Rails

[[N+1問題]]
説明：DBにアクセスする際に、大量のクエリが発行されてしまう非効率の問題のこと

原因：
```ruby
# users_controller.rb
def index
  @users = User.all
end

# index.html.erb
<% @users.each do |user| %>
  <p><%= user.name %></p>
  <% user.posts.each do |post| %>
    <li><%= post.title %></li>
  <% end %>
<% end %>

```

解説：
1. User.allは、全ユーザーを取得するクエリを実行する
	1. ex) SELECT * FROM users;
2. 各ユーザーは、user.postsを参照するたびに、そのユーザーの記事を取得するクエリが発行されている（10人なら10回のクエリ）
	1. SELECT * FROM posts WHERE user_id = 1;
3. 合計、1 + 10 = 11回のクエリが発行される
	1. つまり、N + 1 問題（Nはユーザーの数）


解決策：
Railsでは `includes` を使うのが一般的
```ruby
@users = User.includes(:posts).all
```

解説：
1. この時点では Rails は`SELECT * FROM users;`だけを最初に実行
	1. 全ユーザーの情報しか取得していない
	   
2. user.postsに触れた瞬間、`SELECT * FROM posts WHERE user_id IN (1,2,3,...);`という形のクエリを発行
	1. ここで、関連する全ユーザーの投稿を **一括で取得**
3. 合計２回のクエリが発行される

補足
- **includesは「関連モデルをまとめて読み込む準備」をするだけ**　
	- Rails (ActiveRecord) が提供する **メソッド**

- 実際の `posts` 取得は **ビューで `user.posts` にアクセスしたとき** に発生する
- そのときに **N回発行する代わりに、まとめて1回の[[IN句]]で取得する**


　[[shallow]]
　説明：
　Railsの `shallow:` は「ネストしたルーティングを浅くする」オプション。 のこと
- **一覧・新規は親IDが必要である
- 詳細・編集・削除は子IDだけ**でアクセス可能になる


---
### SQL

[[IN句]]とは

説明：
（）の中で列挙した複数の値において、データが合致するかどうかを判定する演算子のこと
一度にたくさんの値と比較することが可能

```SQL
-- 基本構文
SELECT カラム名
FROM テーブル名
WHERE カラム名 IN (値1, 値2, 値3, ...);

```


例1：ユーザーIDが1, 2, 3の投稿を取得
```sql
SELECT *
FROM posts
WHERE user_id IN (1, 2, 3);
```

👉 意味：`user_id` が **1か2か3のどれか** である投稿を取ってくる。

特徴：
- 複数の OR 条件をまとめて書ける
  ```SQL
    `WHERE user_id = 1 OR user_id = 2 OR user_id = 3`
    ```
    ⬆️ これは長いが、`IN (1,2,3)` なら簡潔に書ける。
    
- 配列やリストのように扱えるので、Railsの `includes` などでまとめてクエリを投げるときによく使われる。




---

### Web技術の基本

[[HTTP]]とは？
HTMLなどのテキストファイルや画像や動画などのコンテンツなどをやりとりするときに
使われるプロトコルのこと

HTTPの歴史
1990年
- HTTP
- HTMLのテキスト情報を配信する機能しか持たないシンプルなプロトコルが使われている

1991年
- HTTP/0.9

1996年
- HTTP/1.0

1997年
- HTTP/1.1
	- 1999年と2014年に改訂

2015年
- HTTP/2

2022年
- HTTP/3

HTTPの基本動作
Webサイトを閲覧するには
クライアントであるWebブラウザが要求を送り、サーバーであるWebサーバーその要求に対して応答を返しており
単純なやりとりを何回も繰り返している


[[HTTPメッセージ]]とは？

説明：
WebブラウザとWebサーバーがやりとりする時に、利用されるデータの形式のこと

HTTPメッセージには
Webブラウザからの要求であるHTTPリクエストとWebサーバーからの応答であるHTTPレスポンスの
２種類に分けることができる

 1つのHTTPリクエストに対して、1つのレスポンスを返す


---


### メモ
思考法・習慣のポイント

1. **少ない時間で価値を最大化する**
    
    - より少ない時間で価値を最大化する（Be lazy/怠惰であれ）
        - 少ない時間と努力で大きな結果を出すためのマインドセット
        - 無駄なことや成果として小さいものに時間や努力を費やしても、生産性は高くならない
          
    - 80:20の法則（重要な20％の仕事が80％もの成果を生み出している）。
    - あれこれせず「本当に価値のある仕事」だけに集中。
      
2. **いきなり手を動かさない**
    
    - まず事実を集め、仮説を立ててから検証する。
        - 問題解決
          1. まず事実を1つ見つける
          2. 原因候補を複数挙げて、いくつか仮説を立てる
          3. その仮説を証明するために手を動かす
             
    - 生産性の差は「手の速さ」ではなく「仮説思考」にある。
        
3. **1日4時間、1つのことに集中する**
    
    - マルチタスクは非効率。
    - 人間の集中限界は1日4時間。チャットやSNSは遮断して深い集中を確保。
        
4. **分からない時はエキスパートに頼る**
    
    - 2時間以上悩むなら人に聞く。
    - 優秀な人ほど「知らない」と素直に言い、質問する。
    - パフォーマンスを上げるためには、無駄なことをしない
        
5. **学んだことをブログに書く**
    
    - 人に説明できるレベルで理解することが重要。
        - 人の説明可能 = 理解
        - 人に伝えるにはどう書けばいいのか？と考える
            - 整理され定着しやすくなる
    - 書くことで理解が深まり、応用力・記憶力が上がる。
        - 学んだことを人に説明可能なレベルで噛み砕くのがベスト
    - 　理解の３要素
        - expalain（説明可能）
        - anytime usable（いつでも使える）
        - applicable（応用可能）
          
6. **検討するより早く失敗する（Fail Fast）**
    
    - Fail Fastの原則
        - 小さく早く試し、修正を繰り返す。
        - try（挑戦）
        - fail（失敗）
        - feedback（フィードバック）
        - update（修正）
            
    - 失敗は怒られるのではなく、学びとして感謝される文化。
        
7. **意見対立時は「自分の意見では」と前置きする**
    
    - “In my opinion”で柔らかく伝える。
    - 相手を否定せず、建設的な議論につなげる。
        
8. **仕事ばかりせず、人生を楽しむ**
    
    - 休養・運動・趣味が生産性を高める。
    - 毎日17時に退社し、勉強や運動を習慣化。
    - 「良い生活習慣 = 生産性の基盤」。


---

---


## 学んだこと

- N+1問題について
- shallowオプションについて
- HTTPについて
- IN句について
- 一流エンジニアの思考法におけるポイント


---


## 教材や参考記事

- RUNTEQ「基礎：基礎STEP 総復習」
- スッキリわかるSQL入門 第4版
- Web技術の基本 第2版
- 初めて作るReactアプリ
- shallow https://qiita.com/sazumy/items/a245f7691c77b56d4cd3 


---


##### ⏳ 学習時間: total：1216.6時間  
##### 🌱 コミット数: １コミット