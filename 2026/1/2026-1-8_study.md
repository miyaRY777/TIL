#RubyとRails、さらにRSpecやDeviseも学びながらSNSアプリ開発とデプロイまでこれ一本！Tailwind、CSSでデザインも抜群。初心者からエンジニアとしてのキャリアを目指す第一歩をスタートできる完全ガイド #とまだTomada #クラスメソッド #インスタンスメソッド


---

# クラスメソッドとは？

## 結論から

**クラスメソッド**とは、

> **クラスそのものに対して呼び出すメソッド**  
> （インスタンスを作らずに使える）

です。

```ruby
Character.info
```

のように、`new` をしなくても使えます。

---

# インスタンスメソッドとの違い

## インスタンスメソッド

```ruby
hero = Character.new
hero.hello
```

### 特徴

- キャラクター1人1人に対する処理
- そのキャラの状態（@hp など）を使う

👉 **「個人向け」**

---

## クラスメソッド

```ruby
Character.info
```

### 特徴

- キャラクター全体に関する処理
- 個々の状態に依存しない

👉 **「全体向け」**

---

# なぜ self を付けるの？

```ruby
def self.info
```

この `self` は **「このクラス自身」** を意味します。

```ruby
Character.info
```

と呼ばれるため、

> 「Characterクラスに属するメソッドですよ」

という宣言です。

---

# クラスメソッドを使う場面

## ① クラス全体の説明・設定

```ruby
def self.info
  puts "これはRPGのキャラクタークラスです"
end
```

👉 個々のキャラではなく **クラスの説明**

---

## ② 決まったルールでインスタンスを作る

```ruby
def self.create_warrior
  new("戦士", 200)
end
```

### 何が嬉しい？

- new の引数を覚えなくていい
- 作り方を1箇所にまとめられる

👉 **「作り方の窓口」**

---

## ③ 選択肢がある生成処理（ファクトリ）

```ruby
Character.create_wizard
```

👉 「魔法使いを作る」という意味が分かりやすい

---

# クラスメソッドの中で new を使える理由

```ruby
new("戦士", 200)
```

これは：

```ruby
Character.new("戦士", 200)
```

と同じです。

クラスメソッドは **クラスの中**にあるので、  
自分自身（Character）を省略して `new` が使えます。

---

# initialize との役割分担

```ruby
def initialize(job, hp)
  @job = job
  @hp = hp
end
```

- initialize → **最低限必要な材料を受け取る**
- クラスメソッド → **材料をどう組み合わせるか**

---

# Railsでの超重要な例

Railsではクラスメソッドだらけです。

```ruby
User.find(1)
User.create(name: "太郎")
Post.where(published: true)
```

全部クラスメソッド。

👉 **「インスタンスを探す・作る」はクラスの仕事**

---

# 使い分けの目安（超重要）

|やりたいこと|使うメソッド|
|---|---|
|個体の状態を扱う|インスタンスメソッド|
|全体の処理|クラスメソッド|
|作り方をまとめる|クラスメソッド|
|状態を表示する|インスタンスメソッド|

---

# 図でイメージ

```text
Character（設計図）
  ├ info（クラス）
  ├ create_warrior（クラス）
  ↓
Character.new（誕生）
  ├ hello（個人）
  ├ status（個人）
```

---

# よくある誤解

❌ クラスメソッドは「上級者向け」  
→ **Railsでは最初から必須**

❌ self が難しい  
→ **「クラス自身」と読むだけ**

---

# まとめ（覚え方）

> **クラスメソッド = 設計図に書く処理**  
> **インスタンスメソッド = キャラ本人の処理**

---

## 一言で理解するなら

> **「new しなくても呼べるのがクラスメソッド」**


| 種類         | 定義                         | 呼び方                    | 使いどころ    |
| ---------- | -------------------------- | ---------------------- | -------- |
| インスタンスメソッド | `def save_tags`            | `post.save_tags`       | 自分の状態を使う |
| クラスメソッド    | `def self.save_tags(post)` | `Post.save_tags(post)` | 集合・検索・生成 |