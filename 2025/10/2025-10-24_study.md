#daily

## 今日取り組んだタスク

- [ ] 中間試験：Rails
- [ ] スッキリわかるSQL入門

---
---
## 一言

中間試験：Rubyは、無事LGTMもらえました！
あと残すところRailsのみです！このまま休憩はさみたいですが、遅れている分このまま突っ走ろうと思います！

##### あと、、、Discordでチェックインするの忘れてた、、、、、

---
---
## 学習内容

### SQL
[![Image from Gyazo](https://i.gyazo.com/f91106c7eeca04895070ff16f24e3ef4.png)](https://gyazo.com/f91106c7eeca04895070ff16f24e3ef4)
**DISTINCT**

使うタイミング：データの種類を習得したい場合に使います！

例：

```sql
SELECT DISTINCT 費目
           FROM 家計簿
```

出力：
```sql
|---|
|食費|
|給料|
|交際費|
|教養娯楽費|
|水道光熱費|
```


**ORDER BY**

複数の列を指定する場合：
複数の列をカンマで区切って指定することで、最初に指定した列で同じ値が複数行があれば
次に指定された列で並び替えが行われます！

例：
```sql
SELECT * 
  FROM 家計簿
ORDER BY 入金額 DESC, 出金額 DESC
```

出力：
```sql
|日付|費目|メモ|入学金|出金額|

|2024-02-10|給料|1月の給料|280000|0|
|2024-02-18|水道光熱費|1月の電気代|0|7560|
|2024-02-14|交際費|同期会の会費|0|5000|
|2024-02-11|教養娯楽費|書籍を購入|0|2800|
|2024-02-03|食費|コーヒーを購入|0|380|
```


列番号を指定する場合：
**列番号（SELECT句の左から数えた順番）** で並び替えることができます！

例：
```sql
SELECT * 
  FROM 家計簿
ORDER BY 4 DESC, 5 DESC
```

出力：
```sql
|日付|費目|メモ|入学金|出金額|

|2024-02-10|給料|1月の給料|280000|0|
|2024-02-18|水道光熱費|1月の電気代|0|7560|
|2024-02-14|交際費|同期会の会費|0|5000|
|2024-02-11|教養娯楽費|書籍を購入|0|2800|
|2024-02-03|食費|コーヒーを購入|0|380|
```

これは、入学金が降べきの順で並んでおり、同じ値だと
次に指定した出金額を基準に降べきの順で並んでる！！！

注意：
ORDER BYをつけないと、検索結果はランダムとなるので
原則、ORDER BYをつける必要がある！


**OFFSET -FETCH**

説明：
検索結果の全行ではなく、並び替えた結果の一部の行だけを得たい！
例えば、トップ５やトップ３のように取得したいときに使います！

基本：
```sql
SELECT 列名　FROM　テーブル名
ORDER BY 列名
OFFSET 先頭から除外する行数 ROWS
FETCH NEXT 取得行数 ROW ONLY
```

|構文|意味|例|
|---|---|---|
|**ORDER BY 列名**|並び順を指定（この順で結果が確定）|`ORDER BY id`|
|**OFFSET n ROWS**|先頭から **n行分スキップ**|`OFFSET 10 ROWS`（11行目から取得）|
|**FETCH NEXT n ROWS ONLY**|OFFSETのあとに **n行だけ取得**|`FETCH NEXT 5 ROWS ONLY`（5件だけ）|

補足：
除外せずに１件目から取得したいなら
- 0を指定する
- DBMSによって、OFSET句自体省略する


例１：
```sql
SELECT 費目, 出金額 FROM 家計簿
 ORDER BY 出金額 DESC
OFFSET 0 ROWS
 FETCH NEXT 3 ROWS ONLY
```

出力：
```sql
費目|出金額|

|水道光熱費|7560|
|交際費|5000|
|教養娯楽費|2800|
```


例２：
```sql
SELECT 費目, 出金額 FROM 家計簿
ORDER BY 出金額 DESC
OFFSET 2 ROWS
FETCH NEXT 1 ROWS ONLY
```

出力：
```sql
費目|出金額|

|教養娯楽費|2800|
```


---
---
## エラーと対応

- エラー内容：
    
- 対処方法：


---
---
## 学んだこと

- **DISTINCT**の使いどころについて
- **ORDER BY**について
- **OFFSET -FETCH**について


---
---
## 教材

- スッキリわかるSQL入門


---
---
##### ⏳ 学習時間:1.９ 時間  
##### 🌱 コミット数: １コミット