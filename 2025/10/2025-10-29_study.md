#daily

## 今日取り組んだタスク

- [ ] 中間試験：Rails
- [ ] スッキリわかるSQL入門

---
---
## 一言

最近、学習方法というかノート取り方ようなもの変えてみました！
1つは、インプット重視のノートで
技術書や書籍などの目次を作り、忘れたらいつでもアクセスできるように構成し
もう1つは、疑問や不明点やエラーなどに対して
解決策のアプローチや理解を深めるような構成にしたノートで学習を進めています😄
しばらくこれで、進めてみます


---
---
## 学習内容
### Ruby / Rails

---
#### renderの内部の仕組みについて

説明：
位置付け：
- Railsフレームワーク（Controller層・View層）でよく使われている！
タイミング：
- ユーザーからリクエストを受け取ったあと、Controllerで処理した結果をViewに返すとき
- JSONや部分テンプレートなど、出力形式を切り替える必要があるとき

具体例：
<%= render @boards %>の内部動作は、以下のように処理されています！
```ruby
# Boardクラスのオブジェクトが入ることで、部分テンプレートを探す
<% @boards.each do |board| %>
  <%= render partial: 'board', locals: { board: board } %>
<% end %>
```

`@boards` には **Boardモデルのインスタンス** が複数入っています！

そこから、eachが1ずつ取り出して、boradという変数に代入し
下の行により、部分テンプレート `_board.html.erb` に **ローカル変数 board** として渡されます！

---
#### sourceオプションの必要性

説明：
位置付け：
- sourceは、Ruby on RailsにおけるMVCにおいて、Modelで使われるオプションである
タイミング：
- 関連名と実際のモデル名が異なる場合にsourceオプションを利用する！

具体例：
```ruby
# sourceが必要になるケース
class User < ApplicationRecord
  has_many :bookmarks
  has_many :bookmark_boards, through: :bookmarks, source: :board
  #        　↑関連名            ↑中間テーブル      　　　↑実際の関連先
end

# 中間テーブル
class Bookmark < ApplicationRecord
  belongs_to :user
  belongs_to :board  # ← sourceで指定するのはこの関連名
end

```

説明：
上のUserモデルでは、関連名がbookmark_boards、中間テーブルの実際の関連先はboardとあるから
Userモデルでは、source: :board を記述する必要があります！


```ruby
# sourceオプションが不要になるケース
class Tag < ApplicationRecord
  has_many :post_tags, dependent: :destroy
  has_many :posts, through: :post_tags  # sourceオプション不要
end

## 中間テーブル
class PostTag < ApplicationRecord
  belongs_to :post
  belongs_to :tag
end

```

説明：
Railsは「関連名（:posts）」と「中間モデル（post_tags）」の対応関係を自動的に推測するので
`PostTag` モデルに `belongs_to :post` が定義されていれば、  `source: :post` を **明示的に書かなくてもOK** です。

---
### SQL

#### 関数

説明：
呼び出したときに、引数に対して
予め用意した処理をして、その結果を戻り値に変換する動作をしてくれる便利なやつ！
関数を呼び出すときは、`関数の名前（引数）`

具体例：「メモとメモの長さ」この二つを表示させたい！
![[スクリーンショット 2025-10-29 23.21.17.png]]
SQL：
```sql
SELECT メモ, LENGTH(メモ) AS メモの長さ
  FROM 家計簿
```

出力：
```sql
|メモ|LENGTH(メモ)|メモの長さ|

|コーヒーを購入|7|
|1月の給料|5|
|書籍を購入|5|
|同期会の会費|6|
|1月の電気代|6|
```

具体例：10バイト以下のメモだけ取得する！
![[スクリーンショット 2025-10-29 23.30.28.png]]

SQL：
```sql
SELECT メモ, LENGTH(メモ) AS メモの長さ
  FROM 家計簿
 WHERE LENGTH(メモ) <= 10
```

出力：
```sql
|メモ|メモの長さ|

|コーヒーを購入|7|
|1月の給料|5|
|書籍を購入|5|
|同期会の会費|6|
|1月の電気代|6|
```



---
---
## エラーと対応

- エラー内容：
    
- 対処方法：


---
---
## 学んだこと

Ruby on Ralis
- renderの内部の仕組みについて
- sourceオプションの必要性
SQL
- 関数について
- LENGTH関数について


---
---
## 教材

- スッキリわかるSQL入門


---
---
##### ⏳ 学習時間: 3.9時間  
##### 🌱 コミット数: １コミット
